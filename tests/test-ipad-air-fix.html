<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>iPad Air Button Fix Test</title>
    <link rel="stylesheet" href="../css/game.css">
    <style>
        /* Debug styles for iPad Air */
        .debug-overlay {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 10000;
            font-size: 12px;
            max-width: 300px;
        }
        
        .debug-overlay.success {
            background: rgba(0, 255, 0, 0.9);
        }
        
        /* Force iPad Air viewport for testing */
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        
        #gameContainer {
            width: 100%;
            height: 100%;
        }
        
        /* Button visibility indicator */
        .button-status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 10000;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="debug-overlay" id="debugOverlay">
        <h3>üîß iPad Air Debug</h3>
        <p>Dimensions: <span id="dimensions"></span></p>
        <p>Orientation: <span id="orientation"></span></p>
        <p>Media Query: <span id="mediaQuery"></span></p>
        <p>Button Position: <span id="buttonPos"></span></p>
    </div>
    
    <div class="button-status" id="buttonStatus">
        Checking buttons...
    </div>
    
    <div id="gameContainer">
        <div id="baseScreen" class="screen active">
            <h2>Tank Base - iPad Air Test</h2>
            
            <div id="playerStats">
                <div class="stat-item">
                    <span class="stat-label">Level</span>
                    <span class="stat-value">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Experience</span>
                    <span class="stat-value">0 / 100</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Coins</span>
                    <span class="stat-value">1000</span>
                </div>
            </div>
            
            <div id="baseContent">
                <div class="upgrades-grid">
                    <!-- Multiple upgrade sections to test scrolling -->
                    <div class="upgrade-category">
                        <h3>üöó Main Tank</h3>
                        <div class="upgrade-section">
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">‚ù§Ô∏è Armor</span>
                                    <span class="upgrade-current">100</span>
                                </div>
                                <button class="upgrade-btn">+20</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">‚öîÔ∏è Cannon</span>
                                    <span class="upgrade-current">10</span>
                                </div>
                                <button class="upgrade-btn">+5</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üí® Engine</span>
                                    <span class="upgrade-current">5</span>
                                </div>
                                <button class="upgrade-btn">+1</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="upgrade-category">
                        <h3>üõ°Ô∏è Mini Tanks</h3>
                        <div class="upgrade-section">
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">‚ù§Ô∏è Armor</span>
                                    <span class="upgrade-current">50</span>
                                </div>
                                <button class="upgrade-btn">+10</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">‚öîÔ∏è Cannon</span>
                                    <span class="upgrade-current">5</span>
                                </div>
                                <button class="upgrade-btn">+2</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üîÑ Rate</span>
                                    <span class="upgrade-current">90%</span>
                                </div>
                                <button class="upgrade-btn">+10%</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="upgrade-category">
                        <h3>üí∞ Economy</h3>
                        <div class="upgrade-section">
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üîß Salvage</span>
                                    <span class="upgrade-current">100%</span>
                                </div>
                                <button class="upgrade-btn">+10%</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üìö Experience</span>
                                    <span class="upgrade-current">100%</span>
                                </div>
                                <button class="upgrade-btn">+10%</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="upgrade-category">
                        <h3>üåü Special</h3>
                        <div class="upgrade-section">
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üöÄ Accelerator</span>
                                    <span class="upgrade-current">5</span>
                                </div>
                                <button class="upgrade-btn">+1</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üîß Auto-Repair</span>
                                    <span class="upgrade-current">0</span>
                                </div>
                                <button class="upgrade-btn">+0.5</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üõ°Ô∏è Shield</span>
                                    <span class="upgrade-current">0</span>
                                </div>
                                <button class="upgrade-btn">+15</button>
                            </div>
                            <div class="upgrade-item">
                                <div class="upgrade-info">
                                    <span class="upgrade-name">üí• Multi-Shot</span>
                                    <span class="upgrade-current">0%</span>
                                </div>
                                <button class="upgrade-btn">+10%</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="baseButtons">
                <button id="startBattleFromBaseBtn" class="menu-btn action-btn">üî• BATTLE</button>
                <button id="backToMenuBtn" class="menu-btn">‚Üê BACK TO MENU</button>
            </div>
        </div>
    </div>
    
    <script>
        function updateDebugInfo() {
            const dimensions = `${window.innerWidth}x${window.innerHeight}`;
            const orientation = window.innerWidth > window.innerHeight ? 'Landscape' : 'Portrait';
            
            // Check media queries
            const mediaQueries = [
                '(min-width: 1000px) and (max-width: 1300px) and (min-height: 700px) and (max-height: 1000px)',
                '(min-width: 768px) and (orientation: landscape)',
                '(orientation: landscape)'
            ];
            
            const activeQueries = mediaQueries.filter(q => window.matchMedia(q).matches);
            
            document.getElementById('dimensions').textContent = dimensions;
            document.getElementById('orientation').textContent = orientation;
            document.getElementById('mediaQuery').textContent = activeQueries.length > 0 ? 'Active' : 'None';
            
            // Check button position
            const baseButtons = document.getElementById('baseButtons');
            const buttonStatus = document.getElementById('buttonStatus');
            const debugOverlay = document.getElementById('debugOverlay');
            
            if (baseButtons) {
                const rect = baseButtons.getBoundingClientRect();
                const isVisible = rect.bottom <= window.innerHeight && rect.top >= 0;
                
                document.getElementById('buttonPos').textContent = isVisible ? 'Visible' : 'Hidden';
                
                if (isVisible) {
                    buttonStatus.textContent = '‚úÖ Buttons Visible';
                    buttonStatus.style.background = 'rgba(0, 255, 0, 0.8)';
                    debugOverlay.className = 'debug-overlay success';
                } else {
                    buttonStatus.textContent = '‚ùå Buttons Hidden';
                    buttonStatus.style.background = 'rgba(255, 0, 0, 0.8)';
                    debugOverlay.className = 'debug-overlay';
                }
                
                console.log('Button rect:', rect);
                console.log('Window height:', window.innerHeight);
                console.log('Media queries active:', activeQueries);
            }
        }
        
        // Update debug info on load and resize
        document.addEventListener('DOMContentLoaded', updateDebugInfo);
        window.addEventListener('resize', updateDebugInfo);
        
        // Test button clicks
        document.getElementById('startBattleFromBaseBtn').addEventListener('click', function() {
            alert('Battle button clicked! ‚úÖ');
        });
        
        document.getElementById('backToMenuBtn').addEventListener('click', function() {
            alert('Back to Menu button clicked! ‚úÖ');
        });
    </script>
</body>
</html>